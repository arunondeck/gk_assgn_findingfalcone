(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{155:function(e,t,a){e.exports=a(358)},163:function(e,t,a){},358:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(16),l=a.n(s),c=a(26),i=(a(163),a(17)),o=a(18),u=a(20),p=a(19),m=a(21),E=a(38),h=a.n(E),f=a(68),d=a(52),y=a(152),v={initialized:!0,token:"",planets:[],vehicles:[],armyCount:4,armies:[],availablePlanets:[],availableVehicles:[],armyTemplate:{planet:"",vehicle:""},searchTime:0,updateSearchTime:!1,armyReady:!1,armyResult:{},armySent:!1},b={REQUEST_TOKEN:"REQUEST_TOKEN",RECEIVE_TOKEN:"RECEIVE_TOKEN",REQUEST_PLANETS:"REQUEST_PLANETS",RECEIVE_PLANETS:"RECEIVE_PLANETS",REQUEST_VEHICLES:"REQUEST_VEHICLES",RECEIVE_VEHICLES:"RECEIVE_VEHICLES",REQUEST_SENDARMY:"REQUEST_SENDARMY",RECEIVE_SENDARMY:"RECEIVE_SENDARMY",REQUEST_DATA:"REQUEST_DATA",RECEIVE_DATA:"RECEIVE_DATA",SELECT_PLANET:"SELECT_PLANET",SELECT_VEHICLE:"SELECT_VEHICLE",UPDATE_SEARCHTIME:"UPDATE_SEARCHTIME",INIT_APP:"INIT_APP",RESET_APP:"RESET_APP"},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:v,t=arguments.length>1?arguments[1]:void 0;switch(console.log(t),t.type){case b.RESET_APP:for(var a=[],n=0;n<e.armyCount;n++)a.push(e.armyTemplate);return Object.assign({},e,{armies:a,initialized:!0,availablePlanets:e.planets.map(function(e){return e.name}),availableVehicles:e.vehicles,searchTime:0,updateSearchTime:!1,armyReady:!1,armyResult:{},armySent:!1});case b.INIT_APP:a=[];for(var r=0;r<e.armyCount;r++)a.push(e.armyTemplate);return Object.assign({},e,{armies:a,initialized:!1});case b.RECEIVE_TOKEN:return Object.assign({},e,{token:t.token});case b.RECEIVE_PLANETS:return Object.assign({},e,{planets:t.planets,availablePlanets:t.planets.map(function(e){return e.name}),initialized:e.availableVehicles.length>0});case b.RECEIVE_VEHICLES:return Object.assign({},e,{vehicles:t.vehicles,availableVehicles:t.vehicles,initialized:e.availablePlanets.length>0});case b.SELECT_PLANET:a=e.armies.slice();var s=Object.assign({},a[t.armyID]);s.planet=t.planet,a[t.armyID]=s;var l=a.filter(function(e){return""!==e.planet}).map(function(e){return e.planet}),c=e.planets.filter(function(e){return!l.includes(e.name)}).map(function(e){return e.name});return Object.assign({},e,{availablePlanets:c,armies:a,updateSearchTime:!0});case b.SELECT_VEHICLE:a=e.armies.slice(),(s=Object.assign({},a[t.armyID])).vehicle=t.vehicle,a[t.armyID]=s;var i=a.filter(function(e){return""!==e.vehicle}).map(function(e){return e.vehicle}),o=e.vehicles.map(function(e){var t=i.reduce(function(t,a){return a===e.name?t+1:t},0);return Object.assign({},e,{total_no:e.total_no-t})}).filter(function(e){return e.total_no>0});return Object.assign({},e,{availableVehicles:o,armies:a,updateSearchTime:!0});case b.UPDATE_SEARCHTIME:var u=e.armies.reduce(function(t,a){var n=e.planets.filter(function(e){return e.name===a.planet}).reduce(function(e,t){return e+t.distance},0),r=e.vehicles.filter(function(e){return e.name===a.vehicle}).reduce(function(e,t){return e+t.speed},0);return n>0&&r>0?t+n/r:t},0),p=e.armies.reduce(function(e,t){return e&&""!==t.planet&&""!==t.vehicle},!0);return Object.assign({},e,{searchTime:u,updateSearchTime:!1,armyReady:p});case b.REQUEST_SENDARMY:return Object.assign({},e,{armySent:!0});case b.RECEIVE_SENDARMY:var m=Object.assign({},t.data);return m.status="false"!==m.status,Object.assign({},e,{armyResult:m});default:return e}},C=Object(d.c)(S,Object(d.a)(y.a)),R={TOKEN_URL:"https://findfalcone.herokuapp.com/token",PLANETS_URL:"https://findfalcone.herokuapp.com/planets",VEHICLES_URL:"https://findfalcone.herokuapp.com/vehicles",FF_URL:"https://findfalcone.herokuapp.com/find"},T=function(){return{type:b.INIT_APP}},O=function(){return{type:b.REQUEST_VEHICLES}},j=function(e){return{type:b.RECEIVE_VEHICLES,vehicles:e}},A=function(){return{type:b.REQUEST_PLANETS}},_=function(e){return{type:b.RECEIVE_PLANETS,planets:e}},P=function(){return{type:b.REQUEST_TOKEN}},I=function(e){return{type:b.RECEIVE_TOKEN,token:e}},g=function(){return{type:b.REQUEST_SENDARMY}},N=function(e){return{type:b.RECEIVE_SENDARMY,data:e}};function V(){return function(e){C.dispatch(T()),e((C.dispatch(A()),function(){var e=Object(f.a)(h.a.mark(function e(t){var a,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(R.PLANETS_URL);case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,t(_(n));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())).then(function(t){e((C.dispatch(O()),function(){var e=Object(f.a)(h.a.mark(function e(t){var a,n;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(R.VEHICLES_URL);case 2:return a=e.sent,e.next=5,a.json();case 5:n=e.sent,t(j(n));case 7:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}())).then(function(t){return e((C.dispatch(P()),function(){var e=Object(f.a)(h.a.mark(function e(t,a){var n,r;return h.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(R.TOKEN_URL,{method:"POST",mode:"cors",headers:{Accept:"application/json"}});case 2:return n=e.sent,e.next=5,n.json();case 5:r=e.sent,t(I(r.token));case 7:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()))})})}}var L=a(8),k=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).formatString=function(e){return e.charAt(0).toUpperCase()+e.slice(1).replace(/_/g," ")},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(L.Row,null,r.a.createElement(L.Col,{xs:12},"Planets",r.a.createElement(L.ListGroup,{className:"sidebar-list list-planets"},this.props.assets.planets.map(function(t,a){return r.a.createElement(L.ListGroupItem,{key:a},r.a.createElement("div",{className:"planet-name"},t.name),r.a.createElement("div",{className:"planet-info"},Object.keys(t).map(function(a){return"name"!==a?r.a.createElement("div",{key:a},e.formatString(a)+":"+t[a]):""})))}))),r.a.createElement(L.Col,{xs:12},"Vehicles",r.a.createElement(L.ListGroup,{className:"sidebar-list list-vehicles"},this.props.assets.vehicles.map(function(t,a){return r.a.createElement(L.ListGroupItem,{key:a},r.a.createElement("div",{className:"vehicle-name"},t.name),r.a.createElement("div",{className:"vehicle-info"},Object.keys(t).map(function(a){return"name"!==a?r.a.createElement("div",{key:a},e.formatString(a)+":"+t[a]):""})))}))))}}]),t}(r.a.Component),U=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handlePlanetSelect=function(){a.props.dispatch({type:"SELECT_PLANET",armyID:a.props.armyID,planet:a.selectPlanet.value})},a.handleVehicleSelect=function(){a.props.dispatch({type:"SELECT_VEHICLE",armyID:a.props.armyID,vehicle:a.selectVehicle.value})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(L.Panel,null,r.a.createElement(L.Panel.Heading,{className:"text-center"},"Army ",this.props.armyID+1),r.a.createElement(L.Panel.Body,null,r.a.createElement(L.FormGroup,{controlId:"formControlsSelect"},r.a.createElement(L.FormControl,{onChange:this.handlePlanetSelect,value:this.props.army.planet,componentClass:"select",placeholder:"Select Planet",inputRef:function(t){e.selectPlanet=t}},""===this.props.army.planet?r.a.createElement("option",{value:"select"},"Select Planet"):r.a.createElement("option",{value:this.props.army.planet},this.props.army.planet),this.props.availablePlanets.map(function(e,t){return r.a.createElement("option",{value:e,key:t+1},e)}))),r.a.createElement(L.FormGroup,{controlId:"formControlsSelect"},r.a.createElement(L.FormControl,{onChange:this.handleVehicleSelect,value:this.props.army.vehicle,componentClass:"select",placeholder:"Select Vehicle",inputRef:function(t){e.selectVehicle=t}},""===this.props.army.vehicle?r.a.createElement("option",{value:"select"},"Select Vehicle"):r.a.createElement("option",{value:this.props.army.vehicle},this.props.army.vehicle),this.props.availableVehicles.map(function(e,t){return r.a.createElement("option",{value:e.name,key:t+1},e.name)})))))}}]),t}(r.a.Component),w=Object(c.b)()(U),D=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(L.Col,{xs:12},r.a.createElement(L.Alert,{bsStyle:"info"},"Select the planets you want to send armies to search in")),this.props.armies.map(function(t,a){return r.a.createElement(L.Col,{key:a,xs:12,md:3},r.a.createElement(w,{armyID:a,availablePlanets:e.props.availableAssets.availablePlanets,availableVehicles:e.props.availableAssets.availableVehicles,army:e.props.armies[a]}))}))}}]),t}(r.a.Component),x=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e,t,a){this.props.updateSearchTime&&this.props.dispatch({type:"UPDATE_SEARCHTIME"})}},{key:"render",value:function(){return r.a.createElement(L.Col,{xs:12,md:2,mdOffset:10},r.a.createElement("div",{className:"eta-block clearfix text-center"},r.a.createElement(L.Col,{xs:8},"Search Time "),0===this.props.searchTime?"":r.a.createElement(L.Col,{xs:4},this.props.searchTime)))}}]),t}(r.a.Component),H=Object(c.b)()(x),Q=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleSendArmyBtnClick=function(e){a.props.dispatch((C.dispatch(g()),function(e,t){return fetch(R.FF_URL,{method:"POST",mode:"cors",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({token:t().token,planet_names:t().armies.map(function(e){return e.planet}),vehicle_names:t().armies.map(function(e){return e.vehicle})})}).then(function(e){return e.json()}).then(function(t){e(N(t))})}))},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return r.a.createElement(L.Col,{xs:12,md:4,mdOffset:4},r.a.createElement(L.Button,{disabled:!this.props.armyReady,onClick:this.props.armyReady?this.handleSendArmyBtnClick:null,bsStyle:"primary",bsSize:"large",block:!0},"Send Army"))}}]),t}(r.a.Component),F=Object(c.b)()(Q),M=a(67),z=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=r.a.createElement("div",{className:"loading sweet-loading"},r.a.createElement("div",{className:"loading-msg"}," Army is being deployed"),r.a.createElement(M.ClipLoader,{sizeUnit:"px",size:150,color:"#123abc",loading:!0})),t=r.a.createElement("div",null,r.a.createElement(L.Alert,{bsStyle:"info"},"Army Deployment Result"),r.a.createElement(L.Panel,{bsStyle:this.props.armyResult.status?"success":"warning"},r.a.createElement(L.Panel.Heading,null,this.props.armyResult.status?"Victory! Falcone Found!":"Search Failed"),r.a.createElement(L.Panel.Body,null,this.props.armyResult.status?"Congragulations King Shan! Queen Al Falcone was found on planet "+this.props.armyResult.planet_name+"!":"Apologies my King. Army failed in finding Queen Al Facone")));return console.log(this.props),r.a.createElement(L.Col,{xs:12},this.props.armyResult.hasOwnProperty("status")?t:e)}}]),t}(r.a.Component),K=function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(a=Object(u.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(r)))).handleResetBtnClick=function(){a.props.dispatch({type:"RESET_APP"})},a}return Object(m.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=r.a.createElement(L.Col,{xs:12},r.a.createElement(L.Col,{className:"sidebar",md:3,lg:2},r.a.createElement(k,{assets:{planets:this.props.state.planets,vehicles:this.props.state.vehicles}})),r.a.createElement(L.Col,{className:"main",md:9,lg:10},r.a.createElement(L.Row,null,r.a.createElement(H,{updateSearchTime:this.props.state.updateSearchTime,searchTime:this.props.state.searchTime})),r.a.createElement(L.Row,null,r.a.createElement(D,{armyCount:this.props.state.armyCount,armies:this.props.state.armies,availableAssets:{availablePlanets:this.props.state.availablePlanets,availableVehicles:this.props.state.availableVehicles}})),r.a.createElement(L.Row,null,r.a.createElement(F,{armyReady:this.props.state.armyReady})))),t=r.a.createElement(L.Col,{xs:12,md:10,mdOffset:1},r.a.createElement("div",{className:"loading sweet-loading"},r.a.createElement(M.ClipLoader,{sizeUnit:"px",size:150,color:"#123abc",loading:!0}))),a=r.a.createElement(L.Col,{xs:12,md:8,mdOffset:2},r.a.createElement(z,{armyResult:this.props.state.armyResult}));return r.a.createElement(L.Grid,{fluid:!0},r.a.createElement(L.Row,null,r.a.createElement(L.Col,{xs:12},r.a.createElement(L.PageHeader,{className:""},"Finding Falcone",r.a.createElement("small",{onClick:this.handleResetBtnClick,title:"Reset Application",className:"pull-right reset-link"},"Reset")))),r.a.createElement(L.Row,null,this.props.state.initialized?this.props.state.armySent?a:e:t))}}]),t}(r.a.Component),B=Object(c.b)(function(e){return{state:e}})(K),Y=function(e){function t(){return Object(i.a)(this,t),Object(u.a)(this,Object(p.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch(V())}},{key:"render",value:function(){return r.a.createElement("div",{className:"app-root"},r.a.createElement(B,null))}}]),t}(n.Component),G=Object(c.b)(function(e){return{state:e}})(Y);l.a.render(r.a.createElement(c.a,{store:C},r.a.createElement(G,null)),document.getElementById("root"))}},[[155,2,1]]]);
//# sourceMappingURL=main.bfe638b7.chunk.js.map